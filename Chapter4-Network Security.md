```text
作者：李晓辉

联系方式：

1. 微信：Lxh_Chat

2. 邮箱：939958092@qq.com 
```

# 身份验证和授权

# 课程目标

- 允许并保护 OpenShift 集群内应用的网络连接。​

- 限制项目和 pod 之间的网络流量。​

- 配置和使用自动服务证书。​

# 利用 TLS 保护外部流量

OpenShift 容器平台提供了多种方式向外部网络公开您的应用。​您可以公开 HTTP 和 HTTPS 流量、​TCP 应用以及非 TCP 流量。​其中一些方法是服务​**type**，如 `NodePort` 或负载平衡器，而另一些则使用自己的 API 资源，如 `Ingress` 和 `Route`。​

借助 OpenShift 路由，您可以向外部网络公开您的应用，从而通过可公开访问的唯一主机名称访问应用。​路由依赖于路由器插件，将来自公共 IP 的流量重定向到 pod。​

下图显示了路由如何公开在集群中作为 pod 运行的应用：

![](https://gitee.com/cnlxh/do280/raw/master/images/chapter4/network-sdn-routes-network.svg)

## 保护route的方案

**边缘**

使用边缘终止时，TLS 终止发生在路由器上，在流量路由到 pod 之前。​路由器服务于 TLS 证书，因此您必须将它们配置到路由中；否则，OpenShift 会将自己的证书分配到路由器，以用于 TLS 终止。​由于 TLS 是在路由器终止的，因此不会加密通过内部网络进行的、​从路由器到端点的连接。​

**直通**

借助直通终止，加密流量直接发送到目标 pod，而无需来自路由器的 TLS 终止。​在此模式中，应用负责为流量提供证书。​要支持应用和访问它的客户端之间的相互身份验证，直通是当前唯一一种方法。​

**再加密**

再加密是边缘终止的一种变体，即路由器通过证书终止 TLS，然后再加密它与端点的连接，这可能有不同的证书。​因此，完整的连接路径被加密，即使在内部网络上。​路由器使用健康检查来判断主机的真实性。​



### 边缘卸载


